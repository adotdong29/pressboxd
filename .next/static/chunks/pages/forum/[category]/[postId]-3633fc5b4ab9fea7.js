(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[602],{2247:(e,t,s)=>{"use strict";s.r(t),s.d(t,{__N_SSG:()=>c,default:()=>m});var r=s(7876),a=s(5605),n=s(4232),l=s(482),i=s(7036),o=s.n(i),c=!0;function m(e){let{category:t,post:s,comments:i}=e,c=(0,a.useRouter)(),[m,d]=(0,n.useState)(""),[u,h]=(0,n.useState)(i||[]),[x,f]=(0,n.useState)(!1),[b,N]=(0,n.useState)(s.likes||0),[_,p]=(0,n.useState)(s.dislikes||0);if(c.isFallback)return(0,r.jsx)("div",{className:"p-4",children:"Loading..."});let g=async e=>{e.preventDefault();let t=l.N.auth.user();if(!t)return;f(!0);let{error:r}=await l.N.from("forum_comments").insert([{post_id:s.id,user_id:t.id,content:m}]);if(r)console.error("Error submitting comment:",r);else{d("");let{data:e,error:t}=await l.N.from("forum_comments").select("*").eq("post_id",s.id).order("created_at",{ascending:!0});t?console.error("Error fetching comments:",t):h(e)}f(!1)},y=async()=>{let{error:e}=await l.N.from("forum_posts").update({likes:b+1}).eq("id",s.id);e||N(b+1)},v=async()=>{let{error:e}=await l.N.from("forum_posts").update({dislikes:_+1}).eq("id",s.id);e||p(_+1)};return(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 text-gray-100 p-4 animate-fadeIn",children:(0,r.jsxs)("div",{className:"container mx-auto",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-4 text-yellow-500",children:s.title}),(0,r.jsx)("p",{className:"mb-4",children:s.content}),s.image_url&&(0,r.jsx)("img",{src:s.image_url,alt:s.title,className:"mb-4 rounded"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,r.jsxs)("button",{onClick:y,className:"text-yellow-500 hover:underline transition transform hover:scale-105",children:["Like (",b,")"]}),(0,r.jsxs)("button",{onClick:v,className:"text-yellow-500 hover:underline transition transform hover:scale-105",children:["Dislike (",_,")"]})]}),(0,r.jsxs)("section",{className:"mb-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-2 text-yellow-500",children:"Comments"}),u.map(e=>(0,r.jsx)("div",{className:"bg-gray-800 p-4 rounded shadow mb-2",children:(0,r.jsx)("p",{children:e.content})},e.id))]}),(0,r.jsxs)("form",{onSubmit:g,className:"mt-4",children:[(0,r.jsx)("textarea",{value:m,onChange:e=>d(e.target.value),className:"w-full p-2 bg-gray-700 text-gray-100 rounded mb-2",placeholder:"Write your comment here...",required:!0}),(0,r.jsx)("button",{type:"submit",className:"py-2 px-4 bg-yellow-500 text-gray-900 font-bold rounded hover:bg-yellow-400 transition transform hover:scale-105",disabled:x,children:x?"Submitting...":"Submit Comment"})]}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsxs)(o(),{href:"/forum/".concat(t),className:"text-yellow-500 hover:underline transition transform hover:scale-105",children:["← Back to ",t," forum"]})})]})})}},5714:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/forum/[category]/[postId]",function(){return s(2247)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[593,636,792],()=>t(5714)),_N_E=e.O()}]);