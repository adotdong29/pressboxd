(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[92],{9538:(e,r,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/game/[id]",function(){return s(9985)}])},9985:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>o});var t=s(7876),a=s(5605),n=s(4232),i=s(482),l=s(43);function o(){let{id:e}=(0,a.useRouter)().query,{user:r}=(0,l.A)(),[s,o]=(0,n.useState)(null),[c,d]=(0,n.useState)([]),[m,u]=(0,n.useState)(""),[x,h]=(0,n.useState)(!0);(0,n.useEffect)(()=>{async function r(){let{data:r,error:s}=await i.N.from("games").select("*").eq("id",e).single();s?console.error("Error fetching game:",s):o(r)}async function s(){let{data:r,error:s}=await i.N.from("reviews").select("\n          *,\n          profiles ( username )\n        ").eq("game_id",e).order("created_at",{ascending:!1});s?console.error("Error fetching reviews:",s):d(r),h(!1)}e&&(r(),s())},[e]);let w=async s=>{if(s.preventDefault(),!r||!m)return;let{error:t}=await i.N.from("reviews").insert([{game_id:e,review_text:m,user_id:r.id}]);if(t)console.error("Error submitting review:",t);else{u("");let{data:r,error:s}=await i.N.from("reviews").select("\n          *,\n          profiles ( username )\n        ").eq("game_id",e).order("created_at",{ascending:!1});s?console.error("Error refreshing reviews:",s):d(r)}};return x?(0,t.jsx)("div",{className:"p-4",children:"Loading..."}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-900 text-gray-100 p-4",children:(0,t.jsxs)("div",{className:"container mx-auto",children:[s&&(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-yellow-500",children:s.title}),(0,t.jsx)("p",{className:"mb-4",children:s.description}),(0,t.jsxs)("p",{className:"mb-4",children:["Date: ",new Date(s.date).toLocaleDateString()]})]}),(0,t.jsxs)("section",{className:"mb-8",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4 text-yellow-500",children:"Reviews"}),c.length>0?c.map(e=>{var r;return(0,t.jsxs)("div",{className:"bg-gray-800 p-4 rounded shadow mb-4",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-400",children:["By ",(null===(r=e.profiles)||void 0===r?void 0:r.username)||"Unknown"]}),(0,t.jsx)("p",{children:e.review_text})]},e.id)}):(0,t.jsx)("p",{children:"No reviews yet. Be the first to write one!"})]}),r&&(0,t.jsxs)("section",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4 text-yellow-500",children:"Write a Review"}),(0,t.jsxs)("form",{onSubmit:w,children:[(0,t.jsx)("textarea",{value:m,onChange:e=>u(e.target.value),className:"w-full p-2 bg-gray-700 text-gray-100 rounded mb-4",placeholder:"Write your review here...",required:!0}),(0,t.jsx)("button",{type:"submit",className:"py-2 px-4 bg-yellow-500 text-gray-900 font-bold rounded hover:bg-yellow-400",children:"Submit Review"})]})]})]})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[593,636,792],()=>r(9538)),_N_E=e.O()}]);