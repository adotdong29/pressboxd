(()=>{var e={};e.id=627,e.ids=[627,636],e.modules={361:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},2015:e=>{"use strict";e.exports=require("react")},2326:e=>{"use strict";e.exports=require("react-dom")},3873:e=>{"use strict";e.exports=require("path")},4075:e=>{"use strict";e.exports=require("zlib")},4487:(e,t,r)=>{"use strict";let s;r.d(t,{N:()=>s}),console.log("Supabase client initialized:",s=(0,require("@supabase/supabase-js").createClient)("https://okvivuxxoteiwsacyclu.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9rdml2dXh4b3RlaXdzYWN5Y2x1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzcyNTk0OTYsImV4cCI6MjA1MjgzNTQ5Nn0.PPayNwtAzhuJSV1iHpsoUch2br626djHxLq9pizyU8g",{auth:{persistSession:!1}}))},6284:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(8732);r(7578);var a=r(6814),l=r(2015),i=r(5512),n=r.n(i),o=r(4487),u=r(431);function c(){let{user:e}=(0,a.A)(),t=(0,u.useRouter)(),[r,i]=(0,l.useState)(""),[c,d]=(0,l.useState)(!1),m=async()=>{await o.N.auth.signOut(),t.push("/login")};return(0,s.jsxs)("header",{className:"bg-gray-800 p-4 shadow flex justify-between items-center sticky top-0 z-50 animate-fadeIn",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,s.jsx)(n(),{href:"/",className:"text-yellow-500 font-bold text-xl transition transform hover:scale-105",children:"Pressboxd"}),(0,s.jsx)(n(),{href:"/",className:"text-gray-100 hover:text-yellow-500 transition transform hover:scale-105",children:"Dashboard"}),(0,s.jsx)(n(),{href:"/profile",className:"text-gray-100 hover:text-yellow-500 transition transform hover:scale-105",children:"Profile"}),(0,s.jsx)(n(),{href:"/forum",className:"text-gray-100 hover:text-yellow-500 transition transform hover:scale-105",children:"Forums"}),(0,s.jsx)(n(),{href:"/friends",className:"text-gray-100 hover:text-yellow-500 transition transform hover:scale-105",children:"Friends"}),(0,s.jsxs)("div",{className:"relative inline-block",onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[(0,s.jsx)("button",{className:"text-gray-100 hover:text-yellow-500 focus:outline-none transition transform hover:scale-105",children:"Sports"}),c&&(0,s.jsx)("div",{className:"absolute left-0 top-full mt-1 w-40 bg-gray-800 border border-gray-700 rounded transition-opacity duration-300",children:["soccer","cricket","hockey","tennis","volleyball","table-tennis","basketball","baseball","rugby","golf"].map(e=>(0,s.jsx)(n(),{href:`/sports/${e}`,children:(0,s.jsx)("span",{className:"block px-4 py-2 hover:bg-gray-700 cursor-pointer capitalize transition transform hover:scale-105",children:e})},e))})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t.push(`/search?q=${encodeURIComponent(r)}`),i("")},className:"flex",children:[(0,s.jsx)("input",{type:"text",value:r,onChange:e=>i(e.target.value),placeholder:"Search users or games",className:"px-2 py-1 rounded bg-gray-700 text-gray-100 focus:outline-none transition duration-300"}),(0,s.jsx)("button",{type:"submit",className:"px-3 py-1 bg-yellow-500 text-gray-900 rounded hover:bg-yellow-400 transition transform hover:scale-105",children:"Search"})]}),e?(0,s.jsx)("button",{onClick:m,className:"text-yellow-500 hover:underline transition transform hover:scale-105",children:"Logout"}):(0,s.jsx)(n(),{href:"/login",className:"text-yellow-500 hover:underline transition transform hover:scale-105",children:"Login"})]})]})}function d({Component:e,pageProps:t}){let r=(0,u.useRouter)(),{user:l}=(0,a.A)(),i="/login"===r.pathname||"/signup"===r.pathname||"/"===r.pathname&&!l;return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-900 text-gray-100",children:[!i&&(0,s.jsx)(c,{}),(0,s.jsx)(e,{...t})]})}let m=function({Component:e,pageProps:t}){return(0,s.jsx)(a.O,{children:(0,s.jsx)(d,{Component:e,pageProps:t})})}},6814:(e,t,r)=>{"use strict";r.d(t,{A:()=>n,O:()=>i});var s=r(8732),a=r(2015);r(4487);let l=(0,a.createContext)({user:null,profile:null,loading:!0});function i({children:e}){let[t,r]=(0,a.useState)(null),[i,n]=(0,a.useState)(null),[o,u]=(0,a.useState)(!0);return(0,s.jsx)(l.Provider,{value:{user:t,profile:i,loading:o},children:e})}let n=()=>(0,a.useContext)(l)},7578:()=>{},7910:e=>{"use strict";e.exports=require("stream")},8279:(e,t,r)=>{"use strict";r.r(t),r.d(t,{config:()=>y,default:()=>g,getServerSideProps:()=>v,getStaticPaths:()=>f,getStaticProps:()=>b,reportWebVitals:()=>j,routeModule:()=>I,unstable_getServerProps:()=>P,unstable_getServerSideProps:()=>M,unstable_getStaticParams:()=>w,unstable_getStaticPaths:()=>S,unstable_getStaticProps:()=>N});var s={};r.r(s),r.d(s,{default:()=>x});var a=r(5799),l=r(2755),i=r(8311),n=r(4268),o=r.n(n),u=r(6284),c=r(8732),d=r(2015),m=r(431),p=r(4487),h=r(6814);function x(){let e=(0,m.useRouter)(),{user:t,loading:r}=(0,h.A)(),[s,a]=(0,d.useState)(null),[l,i]=(0,d.useState)(""),[n,o]=(0,d.useState)(""),[u,x]=(0,d.useState)(null),[g,b]=(0,d.useState)(""),[f,v]=(0,d.useState)(""),[y,j]=(0,d.useState)(!1),[N,S]=(0,d.useState)(!0),w=s||t;if(r||N)return(0,c.jsx)("div",{children:"Loading..."});if(!w)return e.replace("/login"),(0,c.jsx)("div",{children:"Redirecting to login..."});let P=async t=>{t.preventDefault(),j(!0);let r=w;if(!r){let{data:{session:e}}=await p.N.auth.getSession();r=e?.user}if(!r){b("No active session. Please log in again."),j(!1);return}let s=r.id,a=null;if(u){let e=u.name.split(".").pop(),t=`${s}_${Date.now()}.${e}`,{error:r}=await p.N.storage.from("avatars").upload(t,u);if(r){b(`Image upload failed: ${r.message}`),j(!1);return}let{data:l}=p.N.storage.from("avatars").getPublicUrl(t);a=l.publicUrl}let i={id:s,username:l,bio:n,avatar_url:a,updated_at:new Date},{error:o}=await p.N.from("profiles").upsert(i,{returning:"minimal"});o?b(`Profile update failed: ${o.message}`):(v("Profile updated successfully!"),setTimeout(()=>e.push("/app"),2e3)),j(!1)};return(0,c.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,c.jsxs)("form",{onSubmit:P,className:"bg-white p-8 rounded shadow-md w-full max-w-lg",children:[(0,c.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Complete Your Onboarding"}),g&&(0,c.jsx)("p",{className:"text-red-500 mb-4",children:g}),f&&(0,c.jsx)("p",{className:"text-green-500 mb-4",children:f}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-gray-700 mb-2",children:"Profile Picture"}),(0,c.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{e.target.files?.length&&x(e.target.files[0])},className:"w-full p-2 border rounded"})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-gray-700 mb-2",children:"Username"}),(0,c.jsx)("input",{type:"text",value:l,onChange:e=>i(e.target.value),className:"w-full p-2 border rounded",placeholder:"Enter your username",required:!0})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-gray-700 mb-2",children:"Bio"}),(0,c.jsx)("textarea",{value:n,onChange:e=>o(e.target.value),className:"w-full p-2 border rounded",placeholder:"Tell us about yourself",rows:"4",required:!0})]}),(0,c.jsx)("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded w-full",disabled:y,children:y?"Saving...":"Complete Onboarding"})]})})}let g=(0,i.M)(s,"default"),b=(0,i.M)(s,"getStaticProps"),f=(0,i.M)(s,"getStaticPaths"),v=(0,i.M)(s,"getServerSideProps"),y=(0,i.M)(s,"config"),j=(0,i.M)(s,"reportWebVitals"),N=(0,i.M)(s,"unstable_getStaticProps"),S=(0,i.M)(s,"unstable_getStaticPaths"),w=(0,i.M)(s,"unstable_getStaticParams"),P=(0,i.M)(s,"unstable_getServerProps"),M=(0,i.M)(s,"unstable_getServerSideProps"),I=new a.PagesRouteModule({definition:{kind:l.A.PAGES,page:"/onboarding",pathname:"/onboarding",bundlePath:"",filename:""},components:{App:u.default,Document:o()},userland:s})},8732:e=>{"use strict";e.exports=require("react/jsx-runtime")},9021:e=>{"use strict";e.exports=require("fs")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[912,225,430],()=>r(8279));module.exports=s})();